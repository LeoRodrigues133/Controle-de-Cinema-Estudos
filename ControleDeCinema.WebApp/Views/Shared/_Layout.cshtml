<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>@ViewBag.Title - Controle de Cinema</title>

    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <link rel="stylesheet" href="~/css/site.css" />
    <link rel="stylesheet" href="~/css/styles.css"/>
    <link rel="stylesheet" href="~/css/bg.css"/>
</head>
<body>

    <div class="d-flex flex-column">
        <div class="container-fluid flex-grow-1">
            <div class="row flex-nowrap">
                <!-- Sidebar -->
                <nav class="col-auto col-md-3 col-xl-2 px-sm-2 px-0 sidebar min-vh-100 d-flex flex-column">
                    <div class="d-flex flex-column align-items-sm-start px-3 pt-3 flex-grow-1">
                        <a href="/" class="d-flex align-items-center pb-3 mb-md-0 text-decoration-none text-white fs-4 fw-bold">
                            @if(User.Identity is null){
                                <span class="ms-2 d-none d-sm-inline">Geren<span class="text-danger">Cine</span></span>
                            }
                            else
                            {
                                <span class="ms-2 d-none d-sm-inline">@User.Identity.Name</span>
                            }
                        </a>
                        @if (User.Identity is not null && User.Identity.IsAuthenticated)
                        {
                            <ul class="nav nav-pills flex-column mb-auto w-100">
                                <li class="nav-item">
                                    <a class="nav-link" asp-controller="Home" asp-action="Index"><i class="bi bi-house-door nav-icon"></i> <span class="ms-2 d-none d-sm-inline">Início</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" asp-controller="Sala" asp-action="Listar"><i class="bi bi-door-closed nav-icon"></i> <span class="ms-2 d-none d-sm-inline">Salas</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" asp-controller="Categoria" asp-action="Listar"><i class="bi bi-collection-play nav-icon"></i> <span class="ms-2 d-none d-sm-inline">Categorias</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" asp-controller="Filme" asp-action="Listar"><i class="bi bi-film nav-icon"></i> <span class="ms-2 d-none d-sm-inline">Filmes</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" asp-controller="Sessao" asp-action="Listar"><i class="bi bi-clock-history nav-icon"></i> <span class="ms-2 d-none d-sm-inline">Sessões</span></a>
                                </li>
                            </ul>

                        }
                        else
                        {
                            <div class="d-flex flex-column w-75 gap-2 justify-content-center ">

                                <button class="btn btn-outline-dark">
                                    <a href="/Autenticacao/Login" title="Login" class="nav-link px-0 text-decoration-none ">
                                        <i class="fs-4 bi-person-check-fill"></i> <span class="ms-1 d-none d-sm-inline">Login</span>
                                    </a>
                                </button>
                                <button class="btn btn-outline-dark">
                                    <a href="/Autenticacao/Registrar" title="Registrar" class="nav-link px-0 text-decoration-none">
                                        <i class="fs-4 bi-person-plus-fill"></i> <span class="ms-1 d-none d-sm-inline">Registrar</span>
                                    </a>
                                </button>

                            </div>
                        }

                        @if (User.Identity is not null && User.Identity.IsAuthenticated)
                        {
                            <div class="dropdown mt-auto w-100 mb-4">
                                <hr class="text-secondary w-100" />
                                <a href="#" class="d-flex align-items-center text-white dropdown-toggle text-decoration-none px-2" data-bs-toggle="dropdown">
                                    <i class="bi bi-person nav-icon"></i>
                                    <strong class="d-none d-sm-inline ms-2">@User.Identity?.Name</strong>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-dark">
                                    <li>
                                        <form asp-controller="Autenticacao" asp-action="Logout">
                                            <button class="dropdown-item">Logout</button>
                                        </form>
                                    </li>
                                </ul>
                            </div>
                        }
                    </div>
                </nav>

                <div class="col py-4">
                    <main role="main" class="container-sm">

                        <h1 class="mb-3">@ViewBag.Title</h1>
                        <partial name="_Mensagem" model="ViewBag.Mensagem" />

                        @RenderBody()

                    </main>
                </div>
            </div>
        </div>
    </div>

    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="~/js/cart.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
